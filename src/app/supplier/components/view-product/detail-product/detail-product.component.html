<form (ngSubmit)="onSubmit()">
  <div style="height: 40vh; width: 100%;" class="mb-2">
    <carousel
      [imageList]="item.productObj.image"
      *ngIf="!isCreateForm && item.productObj.image">
<!--      (dataEvent)="handleDataEvent($event)"-->
    >
    </carousel>
    <app-post-image
      *ngIf="isCreateForm"
      (dataEvent)="addImage($event)">

    </app-post-image>
  </div>
  <div class="flex justify-around mb-2">
    <div *ngIf="!isCreateForm">
      <label for="productNameEd" class="font-bold text-gray-500">Product Name:</label> <br>
      <input type="text" id="productNameEd" name="productName" [(ngModel)]="item.productObj.productName">
    </div>
    <div class="w-85" *ngIf="isCreateForm">
      <label class="font-bold text-gray-500">Product Name:</label> <br>
      <input class=" w-full" type="text" id="productNameCr" name="productName" value="" [(ngModel)]="item.productObj.productName">
<!--      <input type="text" name="Name"-->
<!--             class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"-->
<!--             [value]="item.productObj" [(ngModel)]="item.productObj" />-->
    </div>
    <div *ngIf="!isCreateForm">
      <label for="status" class="font-bold text-gray-500 left-0">Status:</label> <br>
<!--      <input -->
<!--        style="background-color: #e4e4e7" -->
<!--        type="text" -->
<!--        id="status" -->
<!--        name="status" -->
<!--        [(ngModel)]="item.productObj.status"-->
<!--        disabled-->
<!--      >-->

      <button type="button"
              class="justify-center border bg-yellow-400 active:bg-yellow-600 font-bold uppercase text-xs px-4 py-2 rounded-lg shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
              (click)="harvestProduct(item.productObj.productId)"
              *ngIf="item.productObj.status.toLowerCase() == 'cultivating'">
        Harvest this product!
      </button>
      <button type="button" *ngIf="item.productObj.status.toLowerCase()  == 'harvested'"
              class="w-[181px] justify-center bg-gray-200 font-bold uppercase text-xs px-4 py-2 rounded-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
              disabled>
        Harvested Product
      </button>
    </div>
  </div>
  <div class="flex justify-around mb-2">
    <div *ngIf="!isCreateForm"><label for="amountEd" class="font-bold text-gray-500">Amount:</label> <br>
      <input type="text" id="amountEd" name="amount" [(ngModel)]="item.productObj.amount" pattern="[0-9]*">
      <select [(ngModel)]="item.productObj.unit" name="unit">
        <option *ngFor="let unit of units" [value]="unit">{{ unit }}</option>
      </select>
    </div>
    <div class=" w-85" *ngIf="isCreateForm">
      <label for="amountCr" class="font-bold text-gray-500">Amount:</label> <br>
      <input class="w-5/6" type="text" id="amountCR" name="amount" [(ngModel)]="item.productObj.amount" pattern="[0-9]*">
      <select class="w-1/6" [(ngModel)]="item.productObj.unit" name="unit">
        <option *ngFor="let unit of units" [value]="unit">{{ unit }}</option>
      </select>
    </div>
    <div *ngIf="!isCreateForm">
      <label for="priceEd" class="font-bold text-gray-500">Price:</label> <br>
      <input type="text" id="priceEd" name="price" [(ngModel)]="item.productObj.price">
    </div>
  </div>
  <div class="flex justify-around mb-2" *ngIf="isCreateForm">
    <div class=" w-85">
      <label for="priceCr" class="font-bold text-gray-500">Price:</label> <br>
      <input class=" w-full" type="text" id="priceCr" name="price" [(ngModel)]="item.productObj.price">
    </div>
  </div>
  <div class="flex justify-around mb-2" *ngIf="!isCreateForm">
    <div>
      <label for="cultivatedDate" class="font-bold text-gray-500">Cultivated Date:</label> <br>
      <input
        style="background-color: #e4e4e7"
        type="text" id="cultivatedDate"
        name="cultivatedDate"
        class="border-0"
             [value]="item.productObj.dates?.cultivated | date: 'dd - MMM - yyyy HH:mm:ss'" disabled>
    </div>
    <div>
      <label for="harvestedDate" class="font-bold text-gray-500">Harvested Date:</label> <br>
      <input
        style="background-color: #e4e4e7"
        type="text" id="harvestedDate"
        name="harvestedDate"
        class="border-0"
        [value]="item.productObj.dates?.harvested | date: 'dd - MMM - yyyy HH:mm:ss'" *ngIf="item.productObj.dates?.harvested"
        disabled
      >
      <input style="background-color: #e4e4e7" type="text" name="harvestedDate"
             [value]="'dd - MMM - yyyy'" *ngIf="!item.productObj.dates?.harvested" disabled>
    </div>
  </div>
  <div class="w-full flex">
    <label class="paddinglep flex justify-between flex-wrap font-bold text-gray-500"
           for="description">Certification:</label>
      <button type="button"
              class="fa-solid fa-eye text-green-500 hover:text-green-600 focus:outline-none  mx-3 text-base transition-colors duration-300 ease-in-out transform" (click)="openCertificate(item);dialogCert.showModal()" *ngIf="item.productObj.certificateUrl != ''"></button>
      <button type="button"
              class="w-1/12  h-1/12 object-cover" *ngIf="item.productObj.certificateUrl == ''"><svg fill="none" stroke="Orange" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" (click)="openCertificate(item);dialogCert.showModal()">
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m6.75 12l-3-3m0 0l-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path>
      </svg></button>
  </div>
  <div class="w-full">
    <label class="w-full paddinglep flex justify-between flex-wrap font-bold text-gray-500"
           for="description">Description:</label>
    <div class="w-full flex justify-center flex-wrap">
      <!-- <label for="description">Description:</label> -->
      <textarea class="w-85 flex justify-center " id="description" name="description" [(ngModel)]="item.productObj.description"
      >{{ item.productObj.description }}</textarea>
    </div>
  </div>

  <br>
  <div class="flex justify-around mb-2">
    <button type="submit"
            class="w-3/12 border text-white font-bold uppercase text-xs px-4 py-2 rounded-lg shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
            [disabled]="!item.productObj.productName || !item.productObj.amount || item.productObj.image == null || item.productObj.image.length == 0"
            [ngClass]="!item.productObj.productName || !item.productObj.amount || item.productObj.image == null || item.productObj.image.length == 0 ? 'bg-slate-400' : 'bg-green-500 hover:bg-green-600'"
    >
      Submit
    </button>
    <button type="button"
            class="w-3/12 border bg-red-500 text-white active:bg-red-600 font-bold uppercase text-xs px-4 py-2 rounded-lg shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
            (click)="close()">Cancel
    </button>
  </div>
  <br>
</form>



<dialog [ngClass]="openCertification ? 'flex':'hidden'" class="relative flex-col bg-blueGray-100 rounded-lg w-1/3" #dialogCert>
  <p class="text-xl font-medium" *ngIf="hasCertificate">Certificate</p>
  <p class="text-xl font-medium" *ngIf="!hasCertificate">Add Certificate</p>
  <button type="button" class="absolute top-2 right-6 focus:outline-none text-xl font-bold text-red-600"
          (click)="closeCertificate(false)">X
  </button>

  <app-certificate [product]="product" (dataEvent)="handleDataEvent($event)"></app-certificate>
<!--  <app-view-certificate [product]="product" *ngIf="hasCertificate">-->

<!--  </app-view-certificate>-->

<!--  <app-add-certificate  [product]="product"  *ngIf="!hasCertificate" (dataEvent)="handleDataEvent($event)">-->

<!--  </app-add-certificate>-->

</dialog>

<ngx-loading
  [show]="loading"
  [config]="{ fullScreenBackdrop: true }"
></ngx-loading>

